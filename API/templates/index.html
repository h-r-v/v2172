<html>
<head>

</head>
<body>
    <div class="container">
        <div class="row">
            <div class="feed">
                <h3 class="mt-5">Live Streaming</h3>
                <img src="http://127.0.0.1:5002/video_feed" width="100%">
            </div>
            <br>
            <div class="motion_control">
                <form onsubmit="return false">
                    
                      
                      <input type="text"  id="Input1" name="Input1"/>
                      
                      <input type="text"  name="Input2" id="Input2" />
                      
                      <input type="text"  name="Input3"  id="Input3" />

                      <button type="submit"  id="input-submit"  >Set Values</button>
                  </form>
                <p>buttons here</p>
                <button type="submit"  id="mUP" onclick=holdit(up,upAPI(),1000,2)>Front</button>
                <button type="submit" id="mDown" onclick=holdit(down,downAPI(),1000,2)>Back</button>
                <button type="submit" id="mLeft" onclick=holdit(left,leftAPI(),1000,2)>Left</button>
                <button type="submit" id="mRight" onclick=holdit(right,rightAPI(),1000,2)>Right</button>
            </div>
        </div>
    </div>
    <script type="text/javascript">
        var up = document.getElementById('mUP');
        var down = document.getElementById('mDown');
        var left = document.getElementById('mLeft');
        var right = document.getElementById('mRight');
        var input2 = document.getElementById('Input2').value;
        var input3 = document.getElementById('Input3').value;
        var inputsub = document.getElementById('input-sub');
        
        function holdit(btn, action, start, speedup) {
    var t;
    var repeat = function () {
        action();
        t = setTimeout(repeat, start);
        start = start / speedup;
    }
    btn.mousedown = function() {
        repeat();
    }
    btn.mouseup = function () {
        clearTimeout(t);
    }
};

    
    
    function upAPI(){
        var input1 = document.getElementById('Input1').value;
        fetch(`http://${input1}/up`)
  .then(response => response.json())
  .then(data => console.log(data));
    }

    function downAPI(){
        var input1 = document.getElementById('Input1').value;
        fetch(`http://${input1}/down`)
  .then(response => response.json())
  .then(data => console.log(data));
    }

    function leftAPI(){
        var input1 = document.getElementById('Input1').value;
        fetch(`http://${input1}/left`)
  .then(response => response.json())
  .then(data => console.log(data));
    }

    function rightAPI(){
        var input1 = document.getElementById('Input1').value;
        fetch(`http://${input1}/right`)
  .then(response => response.json())
  .then(data => console.log(data));
    }
    </script>
    </body>
</html>